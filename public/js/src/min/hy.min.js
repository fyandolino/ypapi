/*! hy 02-09-2014 */
var hy=$;!function(){hy.Detect=function(){console.log("global")},hy.sample=function(){}}(jQuery);var hy=$;!function(a){a.main=function(){function b(){k(),c()}function c(){google.maps.event.addListener(u,"idle",function(){var b=a(".categories").val(),c=a(".sub-categories").val();e(b,c)}),a(".categories").change(function(b){b.preventDefault();var c=a(this).val();switch(c){case"restaurants":d(l);break;case"arts":d(m);break;case"nightlife":d(n);break;case"shopping":d(o);break;case"cosmetics":d(p)}}),a(".distance").change(function(b){b.preventDefault();var c=a(this).val(),d=a(".categories").val(),f=a(".sub-categories").val();switch(h(),c){case"walking":u.setZoom(15);break;case"biking":u.setZoom(14);break;case"nightlife":u.setZoom(14);break;case"driving":u.setZoom(14);break;case"transit":u.setZoom(14)}e(d,f)}),a(".go-btn").on("click",function(b){b.preventDefault();var c=a(".categories").val(),d=a(".sub-categories").val();h(),e(c,d)})}function d(b){var c="";a.each(b,function(a,b){c+='<option value="'+b+'">'+a+"</option>"}),a(".sub-categories").html(c)}function e(b,c){var d=u.getBounds();a(".loader").fadeIn();var e="http://api.yelp.com/business_review_search?&term="+b+","+c+"&num_biz_requested=10&tl_lat="+d.getSouthWest().lat()+"&tl_long="+d.getSouthWest().lng()+"&br_lat="+d.getNorthEast().lat()+"&br_long="+d.getNorthEast().lng()+"&ywsid="+r;a.ajax({url:e,dataType:"jsonp",success:function(b){f(b),a(".loader").fadeOut()}})}function f(a){for(var b=0;b<a.businesses.length;b++)g(a.businesses[b]),0===b&&j(a.businesses[0])}function g(a){biz=a,bizAddress=a.address1,bizCity=a.city,bizState=a.state,bizZip=a.zip,bizFull=bizAddress+","+bizCity+","+bizState+","+bizZip;var b=a.id;y[b]=a,x=0,w.geocode({address:bizFull},function(a,c){if(c==google.maps.GeocoderStatus.OK){var d=a[0].geometry.location,e=new google.maps.LatLng(d.k,d.B);x++;var f=new google.maps.Marker({position:e,map:u,icon:"img/icon/pin"+x+".png"});z.push(f),f.bizID=b,google.maps.event.addListener(f,"click",function(){j(y[this.bizID])})}})}function h(){for(i=0;i<z.length;i++)z[i].setMap(null)}function j(b){a(".info").hide().fadeIn("slow"),a(".right .top").html("Results for David"),a(".loc-img").attr("src",b.photo_url),a(".info .title").html(b.name),a(".info .address").html(b.address),a(".info .number").attr("href",b.phone).html(b.phone)}function k(){w=new google.maps.Geocoder;new google.maps.Marker({position:s,map:u,icon:v})}var l={"Coffee & Tea":"coffee","American (New)":"american","Breakfast & Brunch":"breakfast",Sandwhiches:"sandwhiches",Pizza:"pizza"},m={"Art galleries":"galleries",Museums:"museums","Music Venues":"theater","Stadiums & Arenas":"stadiumsarenas"},n={"Bars (all)":"bars","Beer Gardens":"divebars","Comedy Clubs":"nightlife","Piano Bars":"nightlife"},o={Fashion:"fashion","Souvenir Shops":"souvenirs",Books:"books",Mags:"mags","Music & Video":"music","Shopping Centers":"shopping"},p={"Cosmetics & Beauty Supply":"cosmetics","Day Spas":"spas","Hair Salons":"hair","Nail Salons":"hair"},q=[{featureType:"administrative",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]}],r="1Hdgo020LXMsNvz5vb3wsQ",s=new google.maps.LatLng(41.8909798,-87.63069064),t={center:s,zoom:15,disableDefaultUI:!0,mapTypeId:"mystyle"},u=new google.maps.Map(document.getElementById("map-canvas"),t),v="img/icon/hpin.png";u.mapTypes.set("mystyle",new google.maps.StyledMapType(q,{name:"My Style"}));var w,y={},z=[];b()}}(jQuery),$(function(){new hy.main});